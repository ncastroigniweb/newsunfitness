{"version":3,"file":"ionic-rating-component.js","sources":["ionic-rating-component/lib/ionic-rating.service.ts","ionic-rating-component/lib/ionic-rating.component.ts","ionic-rating-component/lib/ionic-rating.module.ts","ionic-rating-component/public-api.ts","ionic-rating-component/ionic-rating-component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicRatingService {\n\n  private starRatingSubject = new Subject<number>();\n  private topicSubject = new Subject<{ [key: string]: any }>();\n\n  publishStartRatingChanged(value: number) {\n    this.starRatingSubject.next(value);\n  }\n\n  getStartRatingChangedObservable(): Subject<any> {\n    return this.starRatingSubject;\n  }\n\n  publishTopic(topic: string, value: number) {\n    this.topicSubject.next({ topic, value });\n  }\n\n  getTopicObservable(key): Subject<any> {\n    return this.topicSubject[key];\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IonicRatingService } from './ionic-rating.service';\n\n@Component({\n  selector: 'ionic-rating-component',\n  template: `\n    <div class=\"ionic5-star-rating\">\n      <ion-button size=\"large\" fill=\"clear\" class=\"rate-button\" [ngStyle]=\"{'width' : fontSize, 'height' : fontSize}\" *ngFor=\"let index of iconsArray\" id=\"{{index}}\" (click)=\"changeRating($event)\">\n        <ion-icon [ngStyle]=\"{'color': ((halfStar === 'false' && index < this.Math.round(this.parseFloat(rating))) || (halfStar === 'true' && index < this.parseFloat(rating))) ? activeColor : defaultColor, 'font-size' : fontSize }\" name=\"{{(halfStar ==='true' && (rating - index > 0) && (rating - index <= 0.5)) ? halfIcon : (index < this.Math.round(this.parseFloat(rating))) ? activeIcon : defaultIcon}}\"></ion-icon>\n      </ion-button>\n    </div>\n  `, styles: [`\n    .rate-button {\n            --padding-bottom:0;\n            --padding-end:0;\n            --padding-start:0;\n            --padding-top:0;\n    }\n  `],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: IonicRatingComponent,\n      multi: true,\n    },\n  ],\n})\nexport class IonicRatingComponent implements ControlValueAccessor, OnInit {\n  @Input()\n  public set rating(val: number) {\n    this._rating = val;\n    if (this.onChange) {\n      this.onChange(val);\n    }\n  }\n\n\n  public get rating(): number {\n    return this._rating;\n  }\n\n\n  constructor(private ionicRatingService: IonicRatingService) {\n    this.Math = Math;\n    this.parseFloat = parseFloat;\n  }\n  private _rating: number;\n  private onChange: any;\n  private onTouched: any;\n  public disabled: boolean;\n  Math: any;\n  parseFloat: any;\n  iconsArray: number[] = [];\n  @Output()\n  ratingChanged: EventEmitter<number> = new EventEmitter<number>();\n  @Input()\n  readonly: string = 'false';\n  @Input()\n  activeColor: string = '#488aff';\n  @Input()\n  defaultColor: string = '#aaaaaa';\n  @Input()\n  activeIcon: string = 'star';\n  @Input()\n  defaultIcon: string = 'star-outline';\n  @Input()\n  halfIcon: string = 'star-half';\n  @Input()\n  halfStar: string = 'false';\n  @Input()\n  maxRating: number = 5;\n  @Input()\n  fontSize: string = '28px';\n\n  public readonly eventInfo = (() => {\n    const id = new Date().getTime();\n    const topic = `star-rating:${id}:changed`;\n    return {\n      topic,\n    };\n  })();\n\n  ngOnInit(): void {\n    this.rating = this.rating || 3; //default after input`s initialization\n    for (let i = 0; i < this.maxRating; i++) {\n      this.iconsArray.push(i);\n    }\n  }\n\n  writeValue(obj: number): void {\n    this.rating = obj;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.readonly = isDisabled ? \"true\" : \"false\";\n  }\n\n  changeRating(event) {\n    if (this.readonly && this.readonly === 'true') return;\n    // event is different for firefox and chrome\n    let id = event.target.id ? parseInt(event.target.id) : parseInt(event.target.parentElement.id);\n    if (this.halfStar && this.halfStar === 'true') {\n      this.rating = ((this.rating - id > 0) && (this.rating - id <= 0.5)) ? id + 1 : id + .5;\n    } else {\n      this.rating = id + 1;\n    }\n    // subscribe this event to get the changed value in your parent compoanent\n    this.ionicRatingService.publishStartRatingChanged(this.rating);\n    this.ionicRatingService.publishTopic(this.eventInfo.topic, this.rating);\n    // unique event\n    this.ratingChanged.emit(this.rating);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { IonicRatingComponent } from './ionic-rating.component';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\n\n\n\n@NgModule({\n  declarations: [IonicRatingComponent],\n  imports: [\n    CommonModule,\n    IonicModule,\n  ],\n  exports: [IonicRatingComponent]\n})\nexport class IonicRatingComponentModule { }\n","/*\n * Public API Surface of ionic-rating\n */\n\nexport * from './lib/ionic-rating.service';\nexport * from './lib/ionic-rating.component';\nexport * from './lib/ionic-rating.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}